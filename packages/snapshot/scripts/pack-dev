#!/usr/bin/env node

// @ts-check
const genMeta = require('../lib/gen-meta')
const config = require('../snapconfig')('dev')

if (process.env.DEBUG == null) {
  process.env.DEBUG = config.LOG_DEBUG
}

const installSnapshot = require('../lib/install-snapshot')

;(async () => {
  try {
    const meta = await genMeta(config)

    await installSnapshot(config, meta.resolverMap)
  } catch (err) {
    process.exit(err.code ?? 1)
  }
})()
